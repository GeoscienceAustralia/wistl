
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Getting Started &#8212; WISTL 0.5 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input and Output" href="ch03_input.html" />
    <link rel="prev" title="Introduction" href="ch01_introduction.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ch03_input.html" title="Input and Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ch01_introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">WISTL 0.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This chapter provides instructions on how to install and run the code for general users. Also it provides instructions for developers on how to install, test and build the package of the code. These instructions have been tested on <cite>Windows 7</cite>, <cite>Linux</cite>, and <cite>OS 10.11.x</cite> and is expected to work on most of modern operating systems.</p>
<div class="section" id="instructions-for-general-users">
<h2>Instructions for general users<a class="headerlink" href="#instructions-for-general-users" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>The VAWS code currently runs with Python 3.6 or higher version with many dependencies. It is recommended to create a Python environment dedicated to the code without disrupting the existing environment. With conda, you can manage environments easily. Instructions below are based on conda, but virutalenv can be used alternatively.</p>
<ol class="arabic simple" id="install-conda">
<li><p>Install Miniconda</p></li>
</ol>
<p>Download and install Miniconda(<a class="reference external" href="https://conda.io/miniconda.html">https://conda.io/miniconda.html</a>) with Python 3.6 or higher version. This step can be skipped if either Miniconda or Anaconda with Python 3.6 or higher version is already installed.</p>
<blockquote>
<div><ul>
<li><p>Windows</p>
<ul class="simple">
<li><p>Double-click the downloaded <cite>Miniconda3-latest-Windows-x86_64.exe</cite> file.</p></li>
<li><p>When installation is finished, from the <cite>Start</cite> menu, open the <cite>Anaconda Prompt</cite>.</p></li>
</ul>
</li>
<li><p>Linux</p>
<ul>
<li><p>In Terminal window, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ bash Miniconda3-latest-Linux-x86_64.sh
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Mac</p>
<ul>
<li><p>In Terminal window, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ bash Miniconda3-latest-MacOSX-x86_64.sh
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Create a conda environment.</p></li>
</ol>
<p>In the terminal client, enter the following command to create the environment called <em>vaws_env</em>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n vaws_env
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" id="activate-environment" start="3">
<li><p>Activate the environment.</p></li>
</ol>
<p>In the terminal client, enter the following to activate the environment.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate vaws_env
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" id="install-code" start="4">
<li><p>Install the code from conda channel</p></li>
</ol>
<p>In the terminal client, enter the following to install the code.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c dynaryu vaws
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="updating">
<h3>Updating<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h3>
<p>In case new version of the code is available, you may update the code. The conda environment <em>vaws_env</em> should be activated first as <a class="reference internal" href="#activate-environment"><span class="std std-ref">2.1.1 step 3</span></a>. And then enter the following commands with in the terminal to update with the new version of the code.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda update -c dynaryu vaws

<span class="c1">## Package Plan ##</span>

      environment location: /foo/vaws_env

      added / updated specs:
            - vaws


    The following packages will be downloaded:

            package          <span class="p">|</span>            build
            -----------------<span class="p">|</span>-----------------
            vaws-3.4         <span class="p">|</span>           py36_1         <span class="m">2</span>.3 MB  dynaryu
            --------------------------------------------------
                                         Total:         <span class="m">2</span>.3 MB

    The following packages will be UPDATED:

      vaws                                 <span class="m">3</span>.2-py36_1 --&gt; <span class="m">3</span>.4-py36_1


    Proceed <span class="o">([</span>y<span class="o">]</span>/n<span class="o">)</span>?
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running-through-gui">
<h3>Running through GUI<a class="headerlink" href="#running-through-gui" title="Permalink to this headline">¶</a></h3>
<p id="run-code">To run the code, the conda environment <em>vaws_env</em> should be activated first as <a class="reference internal" href="#activate-environment"><span class="std std-ref">2.1.1 step 3</span></a>. And then enter the following command in the terminal.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vaws
</pre></div>
</div>
</div></blockquote>
<p>The default scenario will be loaded as shown in <a class="reference internal" href="#main-window-fig"><span class="std std-numref">Fig. 1</span></a>. See <span class="xref std std-ref">chapter 4</span> for details.</p>
<div class="figure align-center" id="id2">
<span id="main-window-fig"></span><a class="reference internal image-reference" href="_static/image/main_window.png"><img alt="_static/image/main_window.png" src="_static/image/main_window.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">Program main window with default scenario loaded</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="instructions-for-developers">
<h2>Instructions for developers<a class="headerlink" href="#instructions-for-developers" title="Permalink to this headline">¶</a></h2>
<p>The development of the code is tracked using the git version control system. The source code is at <a class="reference external" href="https://github.com/GeoscienceAustralia/vaws">https://github.com/GeoscienceAustralia/vaws</a>.</p>
<div class="section" id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Get the source code</p></li>
</ol>
<p>Source code can be copied by cloning the git repository or downloading the zip file from the git repository.</p>
<blockquote>
<div><ul>
<li><p>If git is installed, run the following command in the terminal</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:GeoscienceAustralia/vaws.git
</pre></div>
</div>
</li>
<li><p>Otherwise download the zip file (<a class="reference external" href="https://github.com/GeoscienceAustralia/vaws/archive/master.zip">https://github.com/GeoscienceAustralia/vaws/archive/master.zip</a>) and then extract it.</p></li>
</ul>
</div></blockquote>
<p>This step will create directory called &lt;vaws dir&gt;.</p>
<ol class="arabic simple" start="2">
<li><p>Create a conda environment.</p></li>
</ol>
<p>Make sure either miniconda or anaconda is installed. Otherwise install either Miniconda or Anaconda with Python 3.6 or higher version as <a class="reference internal" href="#install-conda"><span class="std std-ref">2.1.1 step 1</span></a>. Then create the environment called <em>vaws_env</em>. by entering the following command in the terminal.</p>
<blockquote>
<div><ul>
<li><p>Windows</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;
conda env create --name vaws_env --file vaws_win64_py3.6.7.yml
</pre></div>
</div>
</li>
<li><p>Linux/Mac</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;
conda env create --name vaws_env --file vaws_linux64_py3.6.7.yml
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>This will create the environment called vaws_env. The <em>vaws_env</em> can be activated as <a class="reference internal" href="#activate-environment"><span class="std std-ref">2.1.1 step 3</span></a>.</p>
<ol class="arabic simple" start="3">
<li><p>Create GUI</p></li>
</ol>
<p>To create the GUI of the code, enter the following commands in the terminal.</p>
<blockquote>
<div><ul>
<li><p>Windows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">vaws</span> <span class="nb">dir</span><span class="o">&gt;</span>\<span class="n">vaws</span>\<span class="n">gui</span>
<span class="n">build</span><span class="o">.</span><span class="n">cmd</span>
</pre></div>
</div>
</li>
<li><p>Linux/Mac</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;/vaws/gui
./build.sh
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Run the code</p></li>
</ol>
<p>The code can be run in either GUI or CLI mode.</p>
<blockquote>
<div><ul>
<li><p>GUI</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">vaws</span> <span class="nb">dir</span><span class="o">&gt;</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">vaws</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">main</span>  <span class="c1"># for default scenario</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">vaws</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">main</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">config_file</span><span class="o">&gt;</span>  <span class="c1"># for a specific scenario</span>
</pre></div>
</div>
</li>
<li><p>CLI</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">vaws</span> <span class="nb">dir</span><span class="o">&gt;</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">vaws</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">main</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">config_file</span><span class="o">&gt;</span>  <span class="c1"># for a specific scenario</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="building-the-conda-package">
<h3>Building the conda package<a class="headerlink" href="#building-the-conda-package" title="Permalink to this headline">¶</a></h3>
<p>The conda package building is automated through appveryor CI for windows and travis CI for linux, respectively. See appveryor.yml and .travis.yml for details. The built conda package is located on <a class="reference external" href="https://anaconda.org/dynaryu/vaws/">https://anaconda.org/dynaryu/vaws/</a>.
Steps for the conda package is described below for manual building. Please refer to (<a class="reference external" href="https://conda.io/docs/user-guide/tutorials/build-pkgs.html">https://conda.io/docs/user-guide/tutorials/build-pkgs.html</a>) for details.</p>
<ol class="arabic simple">
<li><p>Install conda-build and anaconda-client</p></li>
</ol>
<p>To build the package, you need to install <cite>conda-build</cite> and <cite>anaaconda-client</cite> in the conda <em>root</em> environment not the <cite>vaws_env</cite> environment. And then enter the following in the terminal.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install conda-build anaconda-client
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Build the package</p></li>
</ol>
<p>In the terminal client, enter the following to build the package.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;/build
conda-build .
</pre></div>
</div>
</div></blockquote>
<p>At the end of the building, you should see something like below:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Updating index at /foo/anaconda2/conda-bld/noarch to make package installable with dependencies
INFO:conda_build.build:Updating index at /foo/anaconda2/conda-bld/noarch to make package installable with dependencies
Nothing to <span class="nb">test</span> <span class="k">for</span>: /foo/anaconda2/conda-bld/osx-64/vaws-2.0.3-py27_1.tar.bz2
<span class="c1"># Automatic uploading is disabled</span>
<span class="c1"># If you want to upload package(s) to anaconda.org later, type:</span>

anaconda upload /foo/anaconda2/conda-bld/osx-64/vaws-2.0.3-py27_1.tar.bz2

<span class="c1"># To have conda build upload to anaconda.org automatically, use</span>
<span class="c1"># $ conda config --set anaconda_upload yes</span>

anaconda_upload is not set.  Not uploading wheels: <span class="o">[]</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Upload to anaconda channel</p></li>
</ol>
<p>In the terminal client, enter the following to upload the package to the channel.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>anaconda login
anaconda upload &lt;package&gt;
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="testing-the-code">
<h3>Testing the code<a class="headerlink" href="#testing-the-code" title="Permalink to this headline">¶</a></h3>
<p>To test the code, the conda environment <em>vaws_env</em> should be activated first as <a class="reference internal" href="#activate-environment"><span class="std std-ref">2.1.1 step 3</span></a>. And then enter the following command in the terminal.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;
python -m unittest -v
</pre></div>
</div>
</div></blockquote>
<p>You should see something similar to below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>test_distribute_damage_by_row <span class="o">(</span>vaws.model.tests.test_simulation_batten.TestHouseDamage<span class="o">)</span> ... ok
test_calc <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_calc2 <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_calc_big_a_b_values <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_compute_arithmetic_mean_stdev <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_compute_logarithmic_mean_stdev <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_gev_calc <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_gev_calc2 <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_sample_logrnormal <span class="o">(</span>vaws.model.tests.test_stats.MyTestCase<span class="o">)</span> ... ok
test_calc_zone_pressures <span class="o">(</span>vaws.model.tests.test_zone.MyTestCase<span class="o">)</span> ... ok
test_get_grid <span class="o">(</span>vaws.model.tests.test_zone.MyTestCase<span class="o">)</span> ... ok
test_set_differential_shieding <span class="o">(</span>vaws.model.tests.test_zone.MyTestCase<span class="o">)</span> ... ok
test_str2num <span class="o">(</span>vaws.model.tests.test_zone.MyTestCase<span class="o">)</span> ... ok

----------------------------------------------------------------------
Ran <span class="m">134</span> tests in <span class="m">131</span>.287s

OK <span class="o">(</span><span class="nv">skipped</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>The VAWS user manual is generated using the Sphinx documentation tool (<a class="reference external" href="http://www.sphinx-doc.org/en/1.7/">http://www.sphinx-doc.org/en/1.7/</a>). The source code of the manual is located at the subdirectory called <em>docs</em> under <em>vaws</em> root directory. Both the <em>html</em> and <em>pdf</em> versions of the manual can be generated using the commands below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;vaws dir&gt;/docs
make html   <span class="c1"># for html format</span>
make latexpdf  <span class="c1"># for pdf format</span>
</pre></div>
</div>
<p>The html version of the manual can be updated to the manual website (<a class="reference external" href="http://geoscienceaustralia.github.io/vaws">http://geoscienceaustralia.github.io/vaws</a>) as below. Note that the &lt;build_dir&gt; can be set in the <em>Makefile</em> in the <em>docs</em> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;build_dir&gt;/html
git checkout gh-pages
git commit -m &lt;commit_message&gt;
git push origin gh-pages
</pre></div>
</div>
<p>The pdf version of the manaual can be accessed at <a class="reference external" href="https://github.com/GeoscienceAustralia/vaws/tree/master/manaual.pdf">https://github.com/GeoscienceAustralia/vaws/tree/master/manaual.pdf</a>.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#instructions-for-general-users">Instructions for general users</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#updating">Updating</a></li>
<li><a class="reference internal" href="#running-through-gui">Running through GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instructions-for-developers">Instructions for developers</a><ul>
<li><a class="reference internal" href="#id1">Installation</a></li>
<li><a class="reference internal" href="#building-the-conda-package">Building the conda package</a></li>
<li><a class="reference internal" href="#testing-the-code">Testing the code</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ch01_introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ch03_input.html"
                        title="next chapter">Input and Output</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ch02_software.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ch03_input.html" title="Input and Output"
             >next</a> |</li>
        <li class="right" >
          <a href="ch01_introduction.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">WISTL 0.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Geoscience Australia.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>